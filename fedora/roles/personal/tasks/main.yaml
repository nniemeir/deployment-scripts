- name: Clone C project repositories
  ansible.builtin.git:
    repo: 'https://github.com/nniemeir/{{ item }}.git'
    dest: "/tmp/{{ item }}"
  loop: "{{ c_repos }}"

- name: Build the default target
  ansible.builtin.command: make
  args:
    chdir: "/tmp/{{ item }}"
    creates: "/tmp/{{ item }}/bin/{{ item }}"
  loop: "{{ c_repos }}"

- name: Build the default target
  ansible.builtin.command: make install
  args:
    chdir: "/tmp/{{ item }}"
    creates: "/usr/bin/{{ item }}"
  become: true
  loop: "{{ c_repos }}"

- name: Clone filmfs
  ansible.builtin.git:
    repo: 'https://github.com/nniemeir/filmfs.git'
    dest: "/tmp/filmfs"
    update: true

- name: Build filmfs
  ansible.builtin.command: make
  args:
    chdir: "/tmp/filmfs"
    creates: "/tmp/filmfs/bin/filmfs"

- name: Install filmfs
  ansible.builtin.command: make install
  args:
    chdir: "/tmp/filmfs"
    creates: "{{ ansible_user_dir }}/.local/bin/filmfs"
  loop: "{{ c_repos }}"

- name: Clone Oui
  ansible.builtin.git:
    repo: 'https://github.com/nniemeir/oui.git'
    dest: "/tmp/oui"
    update: true

- name: Install Oui
  ansible.builtin.shell: ./install.sh
  args:
    chdir: /tmp/oui
    creates: "/usr/bin/oui"
  become: true

- name: Clone fzf-wuzzy
  ansible.builtin.git:
    repo: 'https://github.com/nniemeir/fzf-wuzzy'
    dest: "{{ ansible_user_dir }}/.fzf-wuzzy"
    update: false

- name: Clone Merrin System Monitor
  ansible.builtin.git:
    repo: 'https://github.com/nniemeir/merrin'
    dest: "/tmp/merrin"

- name: Install Merrin System Monitor
  ansible.builtin.pip:
    chdir: "/tmp/merrin"
    name: "."

- name: Clone Wisesay
  ansible.builtin.git:
    repo: 'https://github.com/nniemeir/wisesay'
    dest: "/tmp/wisesay"

- name: Install Wisesay
  ansible.builtin.command: go install ./cmd/wisesay
  args:
    chdir: "/tmp/wisesay"
    creates: "{{ ansible_user_dir }}/.local/bin/wisesay"

